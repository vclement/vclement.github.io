<!doctype html>
<html lang="en">
	<head>
		<link rel="stylesheet" type="text/css" href="form.css">
		<meta charset="utf-8">

		<title>Test for someone</title>
		<meta name="description" content="Some test">
		<meta name="author" content="Vclement">

		<!-- <link rel="stylesheet" href="css/styles.css?v=1.0">         -->
		<!--[if lt IE 9]>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
		<![endif]-->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.debug.js"></script>
	</head>

	<body>
		<p id="intro">
			Bienvenu sur notre test.<br />
			Vous avez plusieurs hrases réparti dans plusieurs catégories.<br/>
			A droite de chaque phrase, choisissez le terme qui explique le ressenti par rapport à la phrase. <br />
			A la fin, cliquez sur voir mon résultat et vous pourrez téléchargez votre résultat.<br />
			Nous n'enregistrons pas les résultats, ils sont pour vous uniquement.<br />
			Et n'oublie pas Dieu vous <span style="color:red;">&hearts;</span>.
		</p>

		<form name="myform" action="javascript:handleIt()">
			<p>
			<h2>Prière et Adoration : Vous avez été créés par amour et pour la joie de Dieu </h2>
			<label for="adoration">La facon dont je me conduis montre que Dieu est la première de mes priorités</label>
			<select name="q1" id="ado">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="adoration">Il n'y a aucun aspect de ma vie que je n'ai pas offert à Dieu (donné en offrande, remis)</label>
			<select name="q2" id="ado">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="adoration">Je médite régulièrement sur la parole de Dieu et j'invite le Seigneur dans mes activités de tous les jours</label>
			<select name="q3" id="ado">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="adoration">Je participe à la messe et à un groupe de prière</label>
			<select name="q4" id="ado">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="adoration">J'ai un sens très développé de la grandeur de Dieu même quand je ne ressens pas sa présence</label>
			<select name="q5" id="ado">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />
			</p>

			<p>
			<h2>Fraternité : Vous avez été créés pour faire partie de la famille de Dieu</h2>

			<label for="fraternite1">Je suis authentiquement ouvert et honnête sur qui je suis</label>
			<select name="q6" id="frat">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="fraternite2">J'utilise régulièrement mon temps et mes ressources pour répondre et prendre soin des autres</label>
			<select name="q7" id="frat">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="fraternite3">J'ai des relations profondes avec les autres de mon église</label>
			<select name="q8" id="frat">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="fraternite4">Je peux facilement recevoir des conseils, des encouragements et des interpellations des autres</label>
			<select name="q9" id="frat">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="fraternite5">Je rencontre et partage régulièrement avec un groupe de chrétiens et je me sens responsable d'eux</label>
			<select name="q10" id="frat">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			</p>

			<p>
			<h2>Etre disciple (formation) : Vous avez été créés à l'image de Dieu</h2>

			<label for="disciple1">Je peux facilement reconnaitre ce qui dans ma personnalité ne ressemble pas au Christ</label>
			<select name="q11" id="dis">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="disciple2">La façon dont je gère mes finances montre que je pense plus à Dieu et aux autres qu'à moi-même</label>
			<select name="q12" id="dis">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="disciple3">Je laisse la parole de Dieu guider mes pensées et changer mes actes</label>
			<select name="q13" id="dis">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="disciple4">Je peux prier Dieu dans les moments difficiles et voir ces moments commes des opportunités pour grandir</label>
			<select name="q14" id="dis">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="disciple5">J'ai découvert que la prière a changé ma façon de voir et d'interagir avec le monde</label>
			<select name="q15" id="dis">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />
			</p>

			<p>
			<h2>Service : Vous êtes créés pour servir Dieu et les hommes</h2>

			<label for="service1">J'emploie régulièrement mon temps pour servir le Seigneur</label>
			<select name="q16" id="ser">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="service2">Actuellement je sers le Seigneur avec les dons et les passions qu'il m'a donnés</label>
			<select name="q17" id="ser">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="service3">Je pense souvent aux façons d'utiliser les dons et capacités que Dieu m'a donnés pour lui plaire</label>
			<select name="q18" id="ser">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="service4">J'aime répondre aux besoins des autres sans rien attendre en retour</label>
			<select name="q19" id="ser">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="service5">Je vois mes expériences douloureuses comme des opportunités pour servir les autres dans la même joie</label>
			<select name="q20" id="ser">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />
			</p>

			<p>
			<h2>Evangélisation : Vous avez été faits pour la mission</h2>

			<label for="evangelise1">Je me sens responsable de partager ma foi avec ceux qui ne connaissent pas Jésus</label>
			<select name="q21" id="eva">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="evangelise2">Je recherche des opportunités pour établir des relations avec ceux qui ne connaissent pas Jésus</label>
			<select name="q22" id="eva">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="evangelise3">Je prie régulièrement pour ceux qui ne connaissent pas Jésus</label>
			<select name="q23" id="eva">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="evangelise4">Ma relation avec Jésus revient fréquemment dans mes conversations avec ceux qui ne le connaissent pas</label>
			<select name="q24" id="eva">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />

			<label for="evangelise5">Je suis ouvert à toute possibillité d'aller où Dieu m'appelle pour partager ma foi</label>
			<select name="q25" id="eva">
				<option value=1>Me décrit peu</option>
				<option value=2>Me décrit</option>
				<option value=3>Me décrit partiellement</option>
				<option value=4>Me décrit vraiment</option>
				<option value=5>Me correspond parfaitement</option>
			</select><br /><br />
			</p>

			<input name="Submit" type="submit" value="Voir mon résultat" id="buttonn"/><!-- Send results to a javascript script below -->
		</form>
		
		<button type="button" id ="downloadPDF">Télécharger le résultat</button>
		<canvas id = "myRadarChart" width="1600" height="900"></canvas> <br />
		<script type="text/javascript">
			function handleIt() {
				window.chartColors = {
					red: 'rgb(255, 99, 132)',
					orange: 'rgb(255, 159, 64)',
					yellow: 'rgb(255, 205, 86)',
					green: 'rgba(0, 175, 0, 0.5)',
					blackgreen: 'rgb(0, 99, 0)',
					blue: 'rgb(54, 162, 235)',
					purple: 'rgb(153, 102, 255)',
					grey: 'rgb(231,233,237)'
				};

				//Get all results

				var v1 = parseInt(document.forms["myform"]["q1"].value);
				var v2 = parseInt(document.forms["myform"]["q2"].value);
				var v3 = parseInt(document.forms["myform"]["q3"].value);
				var v4 = parseInt(document.forms["myform"]["q4"].value);
				var v5 = parseInt(document.forms["myform"]["q5"].value);
				var v  = calcul(v1,v2,v3,v4,v5);

				var w1 = parseInt(document.forms["myform"]["q6"].value);
				var w2 = parseInt(document.forms["myform"]["q7"].value);
				var w3 = parseInt(document.forms["myform"]["q8"].value);
				var w4 = parseInt(document.forms["myform"]["q9"].value);
				var w5 = parseInt(document.forms["myform"]["q10"].value);
				var w  = calcul(w1,w2,w3,w4,w5);

				var x1 = parseInt(document.forms["myform"]["q11"].value);
				var x2 = parseInt(document.forms["myform"]["q12"].value);
				var x3 = parseInt(document.forms["myform"]["q13"].value);
				var x4 = parseInt(document.forms["myform"]["q14"].value);
				var x5 = parseInt(document.forms["myform"]["q15"].value);
				var x  = calcul(x1,x2,x3,x4,x5);

				var y1 = parseInt(document.forms["myform"]["q16"].value);
				var y2 = parseInt(document.forms["myform"]["q17"].value);
				var y3 = parseInt(document.forms["myform"]["q18"].value);
				var y4 = parseInt(document.forms["myform"]["q19"].value);
				var y5 = parseInt(document.forms["myform"]["q20"].value);
				var y  = calcul(y1,y2,y3,y4,y5);

				var z1 = parseInt(document.forms["myform"]["q21"].value);
				var z2 = parseInt(document.forms["myform"]["q22"].value);
				var z3 = parseInt(document.forms["myform"]["q23"].value);
				var z4 = parseInt(document.forms["myform"]["q24"].value);
				var z5 = parseInt(document.forms["myform"]["q25"].value);
				var z  = calcul(z1,z2,z3,z4,z5);

				//The datas
				var data = {
					labels: ['Adoration', 'Fraternité', 'Etre disciple', 'Service', 'Evangelisation'],
					datasets: [{
						backgroundColor: window.chartColors.green,
						borderColor: window.chartColors.blackgreen,
						data: [v,w,x,y,z],
						label: 'sante spi',
					}]
				};

				//The options of charts
				var options = {
					scale: {
						display: true,
						maintainAspectRatio: true,
						spanGaps: true,
						ticks: {
							min: 1,
							max: 5,
							fontSize: 15,
						},
						pointLabels: {
							fontSize: 25,
						},
					},
					plugins: {
						filler: {
							propagate: true,
						}
					},
					//Curve the line
					elements: {
						line: {
							tension: 0.1
						}
					},
					onAnimationComplete: done,

				};

				//Here we get the element and create the chart
				var ctx = document.getElementById("myRadarChart");
				//The chart is right here :-)
				var myRadarChart = new Chart(ctx, {
					type: 'radar',
					data: data,
					fillOpacity: .3,
					options: options
				});

				//Code pour telecharger le pdf
				document.getElementById('downloadPDF').addEventListener("click", done);

				//Some debugging functions lors de cet affichage la page est termine
				console.log("resultat: ", calcul(x,x1,x2,x3,x4));//La moyenne de tous les chiffres !
				console.log("success"); //Really ?
			}

			//Cette fonction calcul la moyenne de chaque valeur.
			function calcul(val1, val2, val3, val4, val5) {
				console.log( (val1+val2+val3+val4+val5)/5 ); 
				return ( (val1+val2+val3+val4+val5)/5 ); 
			}

			//Fonction pour telecharge le pdf
			function done() {
				var url = document.getElementById("myRadarChart").toDataURL();
				var doc = new jsPDF('landscape');
				doc.setFontSize(20);
				doc.text(10, 10, "Votre resultat");
				doc.addImage(url, 'PNG', 10, 10, 280, 150 );
				doc.save('resultat.pdf');
			}

			//Fonction pour remettre a zero
			function reset() {

			}
		</script>

	</body>
</html>
